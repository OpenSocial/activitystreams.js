/*! activitystreams 2014-03-19 Copyright (c) 2014 International Business Machines, Apache Software License v2.0 */
var module=module||void 0,define=define||void 0;!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a):b():b(a)}("undefined"!=typeof window?window:this,function(a){function b(){return new Error("Invalid Type")}function c(a,b){void 0!==a&&"object"==typeof a&&(Object.freeze(a),Object.getOwnPropertyNames(a).forEach(function(d){(void 0===b||Array.isArray(b)&&-1===b.indexOf(d))&&c(a[d])}))}function d(a,c){if(void 0===a||null===a)return a;switch(typeof c){case"string":if(typeof a==c)return a;break;case"object":if(c.isArray())for(var d in c)if(typeof a==c[d])return a;break;case"function":if(a instanceof c)return a}throw b()}function e(a){void 0!==a&&d(a,"number")}function f(a,b,c){if(void 0===b||void 0===b)return a;var d=[].concat(a);switch(b.__type__){case"__simple__":case"__object__":d.push(b);break;case"__array__":d=d.concat(b)}return Object.defineProperty(d,"__type__",i(w.Constants.__array__)),Object.defineProperty(d,"__rel__",i(c)),Object.freeze(d),d}function g(a,b){a.__model__=a.__model__||b;for(var c in b)if("object"==typeof b[c])try{a.__model__[c]=b[c],Object.defineProperty(a,c,b[c])}catch(d){}}function h(a,b,c,d,e){Object.defineProperty(a,b,{get:function(){return o(c,d,e)}})}function i(a,b){var c={enumerable:!1,configurable:!1};return void 0===a?c.writable=!1:b?b&&(c.get=a):c.value=a,c}function j(a){if(Array.isArray(a))throw b();return a}function k(a,b,c,d){if(g(a,b),!d&&void 0!==a.objectType&&a.objectType.id in u.forObjectType){var e=u.forObjectType[a.objectType.id];e!==b&&e!==c&&g(a,e)}void 0!==c&&g(a,c)}function l(a,b,c,d){Object.defineProperty(a,b,{enumerable:!0,configurable:!1,get:function(){return w.Transforms.toLink(c,d,b,u.ActionHandler)}})}function m(a,b){if(void 0===a||null===a)return void 0;if(j(a),void 0===a.__wrapped__){for(var c in a){var d=a[c];l(a,c,d,b)}Object.defineProperty(a,"__wrapped__",i(!0))}return a}function n(a,c){if(void 0===a||null===a)return void 0;if(a.__wrapped__)return a;var d,e=c.language||s.language||"en";if(-1!=e.indexOf("*"))throw new Error("Default language context cannot be a wildcard");switch(typeof a){case"string":d={},d[e]=a;break;case"object":d=a;break;default:throw b()}return Object.defineProperty(d,"__wrapped__",i(!0)),Object.defineProperty(d,"toString",i(function(){return d[e]},!1)),d}function o(a,c,e,f){if(d(a,["string","object"]),a.__wrapped__)return a;var g={__wrapped__:a,__context__:c,__rel__:e},h=u.SimpleLinkValue;switch(typeof a){case"string":h=u.SimpleLinkValue,g.__type__=w.Constants.__simple__;break;case"object":j(a),h=u.Object,g.__type__=w.Constants.__object__;break;default:throw b()}return k(g,h,f),Object.freeze(g),g}function p(a,c,e,f){if(!f&&(void 0===a||null===a))return void 0;if(a.__wrapped__)return a;d(a,["string","object"]),j(a),"string"==typeof a&&(a=w.typeValueResolver(a));var g={__wrapped__:a,__context__:c},h=u.SimpleTypeValue;switch(typeof a){case"object":g.__type__=w.Constants.__object__,h=u.Object;break;case"string":g.__type__=w.Constants.__simple__;break;case"undefined":g.__type__=w.Constants.__anonymous__;break;default:throw b()}return k(g,h,e),Object.freeze(g),g}function q(a,b,c,e){if(void 0===a||null===a)return void 0;if(a.__wrapped__)return a;d(a,"object"),j(a),c=c||u.Object;var f={__wrapped__:a,__context__:b};return k(f,c,e),Object.freeze(f),f}function r(a){return a}var s="undefined"!=typeof s?s:{};void 0===Array.isArray&&(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),void 0===Object.prototype.isArray&&(Object.prototype.isArray=function(){return Array.isArray(this)},Object.defineProperty(Object.prototype,"isArray",{enumerable:!1,configurable:!1})),void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},Object.defineProperty(Array.prototype,"forEach",{enumerable:!1,configurable:!1})),void 0===Object.extend&&(Object.extend=function(a,b){var c=Object.getOwnPropertyNames(b);for(var d in c)d in Object.prototype&&c[d]==Object.prototype[d]||d in Array.prototype&&c[d]==Array.prototype[d]||(a[c[d]]=b[c[d]]);return a});var t=function(a){"object"!=typeof a||a.isArray()||Object.extend(this,a)};t.prototype={extend:function(a){return Object.extend(Object.create(this),a||{})},hidden:function(a,b,c){return this[a]=i(b,c),this},property:function(a,b,c){return this[c||a]=u.property(b||a),this},link:function(a,b){return this[b||a]=u.link(a),this},boundNumber:function(a,b,c,d,e,f){return this[f||a]=u.boundNumber(a,b,c,d,e),this},number:function(a,b,c){return this[c||a]=u.number(a,b),this},nonNegativeNumber:function(a,b){return this[b||a]=u.nonNegativeNumber(a),this},nlv:function(a,b){return this[b||a]=u.nlv(a),this},type:function(a,b,c){return this[c||a]=u.type(a,b),this},collection:function(a,b){return this[b||a]=u.collection(a),this},dateTime:function(a,b){return this[b||a]=u.dateTime(a),this},bool:function(a,b,c){return this[b||a]=u.boolean(a,c),this},parameters:function(a,b){return this[b||a]=u.parameters(a),this},genericObject:function(a,b,c){return this[c||a]=u.genericObject(a,b),this},toString:function(){var a=[];for(var b in this)this[b]!==t.prototype[b]&&"function"!=typeof[b]&&this[b].enumerable&&a.push(b);return"Model: "+a.join(", ")}},Object.freeze(t.prototype);var u={property:function(a){if("function"!=typeof a){var b=a;a=function(){return this.__wrapped__[b]}}return{enumerable:!0,configurable:!1,get:a}},"boolean":function(a,b){return u.property(function(){return"object"==typeof this.__wrapped__&&a in this.__wrapped__?Boolean(this.__wrapped__[a]):"boolean"==typeof b?b:!1})},link:function(a){return u.property(function(){return w.Transforms.toLink(this.__wrapped__[a],this,a)})},boundNumber:function(a,b,c,d,f){return e(d),e(b),e(c),u.property(function(){var g=this.__wrapped__[a]||d;return e(g),void 0!==g&&null!==g&&(g=Math.max(Math.min(g,c),b),void 0!==f&&g.toFixed&&(g=g.toFixed(f))),g})},nonNegativeNumber:function(a){return u.property(function(){var b=this.__wrapped__[a];return void 0!==b&&null!==b&&(e(b),b=Math.max(0,b)),b})},number:function(a,b){return u.property(function(){var c=this.__wrapped__[a];return void 0!==c&&null!==c&&(e(c),c=void 0!==b&&c.toFixed?c.toFixed(b):c),c})},nlv:function(a){return u.property(function(){return n(this.__wrapped__[a],this)})},type:function(a,b){return u.property(function(){return p(this.__wrapped__[a],this,void 0,b)})},collection:function(a){return u.property(function(){return q(this.__wrapped__[a],this,u.Collection)})},dateTime:function(a){return u.property(function(){var b=this.__wrapped__[a];return void 0!==a&&null!==a&&(b=w.Transforms.toDateTime(this.__wrapped__[a])),b})},parameters:function(a){return u.property(function(){function b(a,b,c,d){Object.defineProperty(a,b,{enumerable:!0,configurable:!1,get:function(){return p(c,d)}})}var c=this.__wrapped__[a];if(void 0===c||null===c)return void 0;if(d(c,["object"]),j(c),!c.__wrapped__){for(var e in c)b(c,e,c[e],this);Object.defineProperty(c,"__wrapped__",i(!0))}return c})},genericObject:function(a,b){return u.property(function(){return q(this.__wrapped__[a],this,b)})}};u.Base=new t({__wrapped__:i(),__context__:i(),__model__:i(),__asActivity:i(function(){return q(this.__wrapped__,this.__context__,u.Activity,this.__model__)},!0),__asCollection:i(function(){return q(this.__wrapped__,this.__context__,u.Collection,this.__model__)},!0),__asObject:i(function(){return q(this.__wrapped__,this.__context__,this.__model__)},!0),extended:i(function(){var a=this;return function(b){return void 0!==a.__rel__?o(a.__wrapped__,a.__context__,a.__rel__,b):new(Object.getPrototypeOf(a).constructor)(a.__wrapped__,a.__context__,b)}},!0),get:i(function(){var a=this.__wrapped__;return function(b,c){var d=a[b];return void 0!==c&&("function"==typeof c?void 0!==d&&(d=c(d,this,b)):(void 0===d||null===d)&&(d=c)),d}},!0),has:i(function(){var a=this.__wrapped__;return function(b){return b in a}},!0),toString:i(function(){return JSON.stringify(this.__wrapped__)})}),u.TypeValue=u.Base.extend().hidden("__type__").hidden("__anonymous__",function(){return!this.id},!0),u.SimpleTypeValue=u.TypeValue.extend().property("id",function(){return this.__wrapped__}),u.Object=u.Base.extend().property("id",function(){return this.__wrapped__.id||this.__wrapped__["@id"]}).property("objectType",function(){var a=this.__wrapped__.objectType||this.__wrapped__["@type"];return p(a,this)}).property("@type",function(){return this.__wrapped__["@type"]||this.objectType}).property("@id",function(){return this.__wrapped__["@id"]||this.id}).property("@language",function(){return this.__wrapped__["@language"]||this.language}).property("@value").property("@context").property("language",function(){var a=this.__wrapped__.language||this.__wrapped__["@language"];return a||(this.__context__?this.__context__.language:s.language)||"en"}).property("rel",function(){return this.__wrapped__.rel||this.__rel__}).property("mediaType").property("alias").property("duplicates",function(){var a;return a="duplicates"in this.__wrapped__?o(this.__wrapped__.duplicates,this):w.Transforms.toLink([]),a=f(a,this.downstreamDuplicates,"duplicates"),a=f(a,this.upstreamDuplicates,"duplicates")}).nlv("displayName").nlv("summary").nlv("title").nlv("content").link("url").link("attachments").link("author").link("downstreamDuplicates").link("upstreamDuplicates").link("icon").link("image").link("location").link("generator").link("provider").link("tags").link("inReplyTo").link("scope").dateTime("published").dateTime("updated").dateTime("startTime").dateTime("endTime").boundNumber("rating",0,5,0).property("duration").nonNegativeNumber("height").nonNegativeNumber("width").collection("replies").property("actions",function(){return m(this.__wrapped__.actions,this)}).hidden("isA",function(a){function b(a,b){for(var c in b)if(void 0!==b[c]&&b[c].id==a)return!0;return!1}function c(a){for(var b in a)if(void 0!==a[b]&&!a[b].__anonymous__)return!1;return!0}switch(typeof a){case"string":return b(a,[this.objectType,this.verb]);case"object":if(void 0!==a.objectType)switch(a.objectType.id||a.objectType){case"verb":return b(a.id,[this.verb]);case"objectType":return b(a.id,[this.objectType])}else if(void 0!==a.id)return b(a.id,[this.objectType,this.verb]);break;case"undefined":return c([this.objectType,this.verb])}return!1}),u.Activity=u.Object.extend().type("verb",!1).link("actor").link("object").link("target").link("result").link("instrument").link("participant").link("to").link("bto").link("cc").link("bcc").link("from").link("bfrom").property("status",function(){var a=this.__wrapped__.status;return void 0!==a&&w.Constants.status.indexOf(a)>-1?a:"other"}).boundNumber("priority",0,1,0),u.LinkValue=u.Base.extend().hidden("__type__").hidden("__rel__"),u.SimpleLinkValue=u.Base.extend().property("href",function(){return this.__wrapped__}).property("rel",function(){return this.__rel__}),u.Collection=u.Object.extend().nonNegativeNumber("totalItems").property("items",function(){var a=this.__wrapped__.items;if(void 0!==a&&null!==a){if(!Array.isArray(a))throw b();var c=this;a=a.map(function(a){return q(a,c)})}return a}).dateTime("itemsAfter").dateTime("itemsBefore").nonNegativeNumber("itemsPerPage").nonNegativeNumber("startIndex").link("first").link("last").link("prev").link("next").link("current").link("self"),u.ActionHandler=u.Object.extend().property("context","context").property("auth","auth").bool("confirm").link("expects").link("returns").link("requires").link("prefers"),u.HttpActionHandler=u.ActionHandler.extend().property("method").property("target"),u.EmbedActionHandler=u.ActionHandler.extend().property("style").property("target").link("preview"),u.IntentActionHandler=u.ActionHandler.extend(),u.Parameter=u.Object.extend().bool("required",!0).bool("repeated",!1).property("value").property("default").property("enum").property("maximum").property("minumum").property("format").property("pattern").nonNegativeNumber("step").nlv("placeholder"),u.UrlTemplate=u.Object.extend().property("template").parameters("parameters","params"),u.TypedPayload=u.Object.extend().type("type",!1,"semanticType").link("schema"),u.HtmlForm=u.Object.extend().parameters("parameters","params"),u.Ext={},u.Ext.Replies=new t({}).collection("attending").collection("followers").collection("following").collection("friends").collection("friend-requests","friendRequests").collection("likes").collection("notAttending").collection("maybeAttending").collection("reviews").collection("saves").collection("saves").collection("shares"),u.Ext.Position=u.Base.extend().number("altitude",2).boundNumber("latitude",-90,90,void 0,2).boundNumber("longitude",-180,180,void 0,2),u.Ext.Address=u.Base.extend().property("formated").property("streetAddress").property("locality").property("region").property("postalCode").property("country"),u.Ext.Place=u.Base.extend().genericObject("position",u.Ext.Position).genericObject("address",u.Ext.Address),u.Ext.Mood=u.Base.extend().type("mood",!1),u.forObjectType={activity:u.Activity,collection:u.Collection,verb:u.Object,objectType:u.Object,HttpActionHandler:u.HttpActionHandler,EmbedActionHandler:u.EmbedActionHandler,IntentActionHandler:u.IntentActionHandler,HtmlForm:u.HtmlForm,UrlTemplate:u.UrlTemplate,typedPayload:u.TypedPayload,parameter:u.Parameter,place:u.Ext.Place,address:u.Ext.Address,position:u.Ext.Position,mood:u.Ext.Mood};var v=r,w={get typeValueResolver(){return function(a){try{var b=v(a)||a;return d(b,["object","string"]),b}catch(c){return a}}},set typeValueResolver(a){"function"==typeof a&&(v=a)},indexTypeValuesFromCollection:function(a){var b={},c=a.items;if(void 0!==c&&Array.isArray(c))for(var d in c){var e=c[d],f=e.objectType.id;-1!=["verb","objectType"].indexOf(f)&&void 0!==e.id&&(b[e.id]=e.__wrapped__)}return b},parse:function(a){var b=JSON.parse(a);return"verb"in b?q(b,void 0,u.Activity):"items"in b?q(b,void 0,u.Collection):q(b)},Object:q,Collection:function(a){return q(a,void 0,u.Collection)},Activity:function(a){return q(a,void 0,u.Activity)},Transforms:{toLink:function(a,b,c,d){if(void 0===a)return void 0;if(Array.isArray(a)){if(void 0===a.__type__){for(var e in a)h(a,e,a[e],this,c);a.__type__=w.Constants.__array__,a.__rel__=c,Object.defineProperty(a,"__type__",i()),Object.defineProperty(a,"__rel__",i()),Object.freeze(a)}return a}return o(a,b,c,d)},toType:function(a,b,c){return p(a,b,void 0,c)},toNaturalLanguageValue:function(a,b){return n(a,b)},toCollection:function(a,b){return q(a,b,u.Collection)},toObject:function(a,b){return q(a,b)},toActivity:function(a,b){return q(a,b,u.Activity)},toDateTime:function(a){var c;if(a instanceof Date)c=a;else{if("string"!=typeof a)throw b();c=new Date(a)}return c}},Constants:{__anonymous__:"__anonymous__",__object__:"__object__",__simple__:"__simple__",__type__:"__type__",__array__:"__array__",post:"post",activity:"activity",verb:"verb",objectType:"objectType",collection:"collection",status:["active","canceled","completed","pending","tentative","voided"],formats:{"boolean":"boolean","byte":"byte",hex:"hex",date:"date","double":"double",duration:"duration","float":"float",int32:"int32",int64:"int64",uint32:"uint32",uint64:"uint64",lang:"lang",uri:"uri",iri:"iri"},verbs:{accept:"accept",access:"access",acknowledge:"acknowledge",add:"add",agree:"agree",append:"append",approve:"approve",archive:"archive",assign:"assign",at:"at",attach:"attach",attend:"attend",author:"author",authorize:"authorize",borrow:"borrow",build:"build",cancel:"cancel",close:"close",complete:"complete",confirm:"confirm",consume:"consume",checkin:"checkin",create:"create","delete":"delete",deliver:"deliver",deny:"deny",disagree:"disagree",dislike:"dislike",experience:"experience",favorite:"favorite",find:"find",flagAsInappropriate:"flag-as-inappropriate",follow:"follow",give:"give",host:"host",ignore:"ignore",insert:"insert",install:"install",interact:"interact",invite:"invite",join:"join",leave:"leave",like:"like",listen:"listen",lose:"lose",makeFriend:"make-friend",open:"open",play:"play",present:"present",purchase:"purchase",qualify:"qualify",read:"read",receive:"receive",reject:"reject",remove:"remove",removeFriend:"removeFriend",replace:"replace",request:"request",requestFriend:"requestFriend",resolve:"resolve",_return:"return",retract:"retract",rsvpMaybe:"rsvp-maybe",rsvpNo:"rsvp-no",rsvpYes:"rsvp-yes",satisfy:"satisfy",save:"save",schedule:"schedule",search:"search",sell:"sell",send:"send",share:"share",sponsor:"sponsor",start:"start",stopFollowing:"stop-following",submit:"submit",tag:"tag",terminate:"terminate",tie:"tie",unfavorite:"unfavorite",unlike:"unlike",unsatisfy:"unsatisfy",unsave:"unsave",unshare:"unshare",update:"update",use:"use",watch:"watch",win:"win"},objectTypes:{alert:"alert",application:"application",article:"article",audio:"audio",badge:"badge",binary:"binary",bookmark:"bookmark",collection:"collection",comment:"comment",device:"device",event:"event",file:"file",game:"game",group:"group",image:"image",issue:"issue",job:"job",note:"note",offer:"offer",organization:"organization",page:"page",permission:"permission",person:"person",place:"place",process:"process",product:"product",question:"question",review:"review",role:"role",service:"service",task:"task",team:"team",video:"video"}},Models:u};return c(w,["Models"]),"function"==typeof define&&define.amd&&define("asms",[],function(){return w}),void 0!==a&&(a.asms=w),w});